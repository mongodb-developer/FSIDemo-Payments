(function(){"use strict";var e={4740:function(e,t,n){var a=n(9242),s=n(3396);const r={class:"main-container"};function o(e,t,n,a,o,i){const c=(0,s.up)("MainHeader"),u=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,{user:o.user},null,8,["user"]),(0,s._)("div",r,[(0,s.Wm)(u,{onSetUser:i.setUser},null,8,["onSetUser"])])],64)}n(560);var i=n(7139),c=n.p+"img/happy_leafy.8f0c17d0.png";const u=e=>((0,s.dD)("data-v-13eb64ee"),e=e(),(0,s.Cn)(),e),l={class:"main-header"},d=u((()=>(0,s._)("img",{src:c,alt:"MongoDB Logo"},null,-1))),m=u((()=>(0,s._)("h2",{class:"heading"},"Payments Demo",-1))),h=[d,m],p={class:"nav"},y=u((()=>(0,s._)("div",{class:"menu-btn"},[(0,s._)("i",{class:"fas fa-bars fa-2x"})],-1))),f={key:2,class:"notification-badge"},g=u((()=>(0,s._)("i",{class:"fas fa-bell fa-2x"},null,-1))),_={key:0,class:"notification"};function w(e,t,n,a,r,o){const c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",{class:"logo",onClick:t[0]||(t[0]=(...e)=>o.goHome&&o.goHome(...e))},h),(0,s._)("div",p,[y,n.user?((0,s.wg)(),(0,s.j4)(c,{key:0,to:{name:"account",params:{id:n.user._id}}},{default:(0,s.w5)((()=>[(0,s.Uk)("My Accounts")])),_:1},8,["to"])):(0,s.kq)("",!0),(0,s.Uk)(" | "),n.user?((0,s.wg)(),(0,s.j4)(c,{key:1,to:{name:"user",query:{userId:n.user._id,username:n.user.username,email:n.user.email}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(n.user.username),1)])),_:1},8,["to"])):(0,s.kq)("",!0),n.user?((0,s.wg)(),(0,s.iD)("div",f,[g,(0,s._)("span",{onClick:t[1]||(t[1]=e=>r.showNotif=!r.showNotif),class:"badge"},(0,i.zw)(r.notifications.length),1),r.showNotif?((0,s.wg)(),(0,s.iD)("div",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.notifications,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e._id},[(0,s._)("p",null,(0,i.zw)((new Date).toString("DD-MM-YYYY"))+" - "+(0,i.zw)(e.data),1)])))),128)),(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>o.clearNotifications&&o.clearNotifications(...e))},"Clear")])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])}var v=n(4488);const k=(0,v.io)("/");var b=k,U={name:"MainHeader",props:{user:Object},data(){return{notifications:[],showNotif:!1}},mounted(){this.setupSocket()},watch:{user(e,t){e?._id!==t?._id&&this.setupSocket()}},methods:{setupSocket(){this.user?._id&&(console.log("Setting socket user:",this.user._id),b.emit("set-user-socket",this.user._id),b.off("add-notification",this.handleNotification),b.on("add-notification",this.handleNotification))},goHome(){this.$router.push({name:"home",params:{userId:this.user._id}})},clearNotifications(){this.notifications=[],this.showNotif=!1},handleNotification(e){console.log("Received notification for current user:",e),this.notifications.push(e)}},beforeUnmount(){b.off("add-notification",this.handleNotification)}},D=n(89);const P=(0,D.Z)(U,[["render",w],["__scopeId","data-v-13eb64ee"]]);var A=P,I={name:"App",components:{MainHeader:A},mounted(){console.log("mounted app"),this.user||this.$router.push({name:"login"})},data(){return{user:null}},methods:{setUser(e){console.log("setUser",e),this.user=e}}};const T=(0,D.Z)(I,[["render",o]]);var C=T,N=n(2483);const z=e=>((0,s.dD)("data-v-66e413cc"),e=e(),(0,s.Cn)(),e),$={class:"main-home"},S={class:"my-accounts"},R=z((()=>(0,s._)("h3",null,"My Accounts",-1))),x={class:"account-list"},q={key:0},M={class:"account-details"},H=z((()=>(0,s._)("b",null,"Account Type",-1))),Z=z((()=>(0,s._)("p",null,"Limitations: ",-1))),O=z((()=>(0,s._)("p",null," Go to account ",-1))),L=["onClick"],B={class:"my-latest-trx"},j=z((()=>(0,s._)("h3",null,"My Latest Transactions",-1))),Y={class:"transaction-list"},V={key:0},E={class:"transaction-details"},K=z((()=>(0,s._)("b",null,"Amount",-1))),W=z((()=>(0,s._)("b",null,"@",-1)));function Q(e,t,n,a,r,o){const c=(0,s.up)("router-link"),u=(0,s.up)("payeePicker"),l=(0,s.up)("AddAccount");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",$,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>o.refreshPage&&o.refreshPage(...e))},"Refresh")]),(0,s._)("div",S,[R,(0,s._)("div",x,[0===this.currentUser?.linkedAccounts.length?((0,s.wg)(),(0,s.iD)("div",q,"No accounts")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.currentUser.linkedAccounts,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.accountId},[(0,s._)("details",M,[(0,s._)("summary",null,[H,(0,s.Uk)(": "+(0,i.zw)(e.accountType),1)]),Z,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(e.limitations),(t=>((0,s.wg)(),(0,s.iD)("div",{key:t},(0,i.zw)(t)+" : "+(0,i.zw)(e.limitations[t]),1)))),128)),(0,s.Wm)(c,{to:{name:"account",params:{id:n.userId}}},{default:(0,s.w5)((()=>[O])),_:1},8,["to"]),(0,s._)("button",{onClick:t=>o.makePayment(e)},"Make Payment",8,L),(0,s.Wm)(u,{user:this.currentUser,onSelectionChanged:o.payeeSelected},null,8,["user","onSelectionChanged"])])])))),128))]),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>o.addAccounts&&o.addAccounts(...e))},(0,i.zw)(r.isSetAccountDetails?"Close":"Add Account"),1),r.isSetAccountDetails?((0,s.wg)(),(0,s.j4)(l,{key:0,user:this.currentUser,onRefreshUser:o.refreshUser},null,8,["user","onRefreshUser"])):(0,s.kq)("",!0)]),(0,s._)("div",B,[j,(0,s._)("div",Y,[0===this.currentUser?.recentTransactions.length?((0,s.wg)(),(0,s.iD)("div",V,"No recent transactions")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.currentUser.recentTransactions,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e._id},[(0,s._)("details",E,[(0,s._)("summary",null,[(0,s.Uk)((0,i.zw)("outgoing"===e.type?"ðŸ“¤":"ðŸ“¥")+" |",1),K,(0,s.Uk)(" : "+(0,i.zw)(e.amount)+"$ | ",1),W,(0,s.Uk)(" "+(0,i.zw)(new Date(e.date)),1)]),(0,s._)("p",null,[(0,s.Uk)(" Trx Id : "),(0,s.Wm)(c,{to:{name:"transaction",params:{id:e._id},query:{trxId:e._id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e._id),1)])),_:2},1032,["to"])]),(0,s._)("p",null,"Type : "+(0,i.zw)(e.type),1),(0,s._)("p",null,(0,i.zw)(o.getTrxDescription(e)),1),(0,s._)("p",null,"Amount: "+(0,i.zw)(e.amount),1),(0,s._)("p",null,"Status: "+(0,i.zw)(e.status),1)])])))),128))])])])}var F=n(1076);const X=e=>((0,s.dD)("data-v-f34ab0f6"),e=e(),(0,s.Cn)(),e),G=X((()=>(0,s._)("label",{for:"accountType"},"Account Type",-1))),J=X((()=>(0,s._)("option",{value:"checking"},"Checking",-1))),ee=X((()=>(0,s._)("option",{value:"savings"},"Savings",-1))),te=[J,ee],ne=X((()=>(0,s._)("label",{for:"accountBalance"},"Account Balance",-1))),ae={class:"random-account"},se=X((()=>(0,s._)("label",{for:"accountNumber"},"Account Number",-1))),re=X((()=>(0,s._)("button",{type:"submit"},"Add Account",-1)));function oe(e,t,n,r,o,i){return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>i.addAccount&&i.addAccount(...e)),["prevent"]))},[G,(0,s.wy)((0,s._)("select",{id:"accountType","onUpdate:modelValue":t[0]||(t[0]=e=>o.accountType=e)},te,512),[[a.bM,o.accountType]]),ne,(0,s.wy)((0,s._)("input",{type:"number",id:"accountBalance","onUpdate:modelValue":t[1]||(t[1]=e=>o.accountBalance=e)},null,512),[[a.nr,o.accountBalance]]),(0,s._)("div",ae,[se,(0,s.wy)((0,s._)("input",{type:"text",id:"accountNumber","onUpdate:modelValue":t[2]||(t[2]=e=>o.accountNumber=e)},null,512),[[a.nr,o.accountNumber]]),(0,s._)("button",{onClick:t[3]||(t[3]=(0,a.iM)(((...e)=>i.generateRandomAccountNumber&&i.generateRandomAccountNumber(...e)),["prevent"]))},"Generate Random Account Number")]),re],32)}var ie={name:"AddAccount",props:{user:Object},data(){return{accountType:"checking",accountNumber:"",accountBalance:1e3}},methods:{generateRandomAccountNumber(){this.accountNumber=Math.floor(1e9*Math.random())},async addAccount(){try{if(console.log("Adding account:",this.user),!this.accountNumber||!this.accountType||!this.accountBalance)return void alert("Please enter a valid account details");const e=await F.Z.post("/api/account",{userId:this.user._id,username:this.user.username,accountDetails:{accountNumber:`${this.accountNumber}`,accountType:this.accountType,balance:this.accountBalance,limitations:{withdrawalLimit:1e5,transferLimit:1e3,otherLimitations:"No Limit"},securityTags:[],details:{IBAN:`IL${this.accountNumber}`}}});console.log("Account added successfully:",e.data),this.$emit("refreshUser",e.data.user)}catch(e){console.error("Account add failed:",e)}}}};const ce=(0,D.Z)(ie,[["render",oe],["__scopeId","data-v-f34ab0f6"]]);var ue=ce;const le={class:"payee-picker"},de={key:0},me=["onClick"];function he(e,t,n,r,o,c){return(0,s.wg)(),(0,s.iD)("div",le,[(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchTerm=e),onInput:t[1]||(t[1]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),placeholder:"Search payees..."},null,544),[[a.nr,o.searchTerm]]),o.searchResults.length?((0,s.wg)(),(0,s.iD)("ul",de,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.searchResults,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e._id,onClick:t=>c.selectPayee(e),class:(0,i.C_)(["payee-item",{"selected-payee":e._id===o.selectedPayee._id}])},(0,i.zw)(e.username)+" - "+(0,i.zw)(e.account),11,me)))),128))])):(0,s.kq)("",!0)])])}var pe=n(4806),ye=n.n(pe),fe={props:{user:Object},data(){return{payees:[],selectedPayee:{},searchTerm:"",searchResults:[]}},mounted(){this.getPayees()},created(){this.debouncedSearch=ye().debounce(this.searchPayee,300)},methods:{async getPayees(){try{const e=await F.Z.get("/api/account/fts/search");let t=e.data.filter((e=>e._id!==this.user._id));this.searchResults=t}catch(e){console.error("Payees failed:",e)}},selectPayee(e){this.selectedPayee=e,this.selectedPayee.userId=e.userId,this.searchTerm=e.username,this.sendPayeeToParent()},async searchPayee(){if(this.searchTerm.length>0){const e=await F.Z.get(`/api/account/fts/search?text=${this.searchTerm}`);let t=e.data.filter((e=>e._id!==this.user._id));this.searchResults=t}else this.searchResults=[]},sendPayeeToParent(){this.$emit("selection-changed",this.selectedPayee)}}};const ge=(0,D.Z)(fe,[["render",he],["__scopeId","data-v-0b2fffc9"]]);var _e=ge,we={name:"MainHome",props:["userId"],components:{AddAccount:ue,payeePicker:_e},emits:["setUser"],mounted(){this.refreshPage()},data(){return{isSetAccountDetails:!1,currentUser:{_id:this.userId,linkedAccounts:[],recentTransactions:[]},selectedPayee:{}}},methods:{addAccounts(){this.isSetAccountDetails=!this.isSetAccountDetails},getTrxDescription(e){return"outgoing"===e.type?`To: ${e.referenceData.receiver.name}`:"incoming"===e.type?`From: ${e.referenceData.sender.name}`:`External Payment from ${e.paymentMethod}`},payeeSelected(e){this.selectedPayee=e,console.log("payee selected",this.selectedPayee)},refreshUser(e){this.currentUser=e,this.isSetAccountDetails=!1},async refreshPage(){console.log("refreshing page- ",this.userId);const e=await F.Z.get(`/api/user/${this.userId}`);console.log("user fetched successfully:",e.data),this.currentUser=e.data},async makePayment(e){if(!this.selectedPayee.userId)return void alert("Please select a payee");const t=+prompt(`Please enter amount to transfer to ${this.selectedPayee.username}`);if(!t||t<0)return void alert("Please enter a valid amount");const n={accountId:e.accountId,amount:t,type:"credit",details:{description:"Payment for services",userId:this.currentUser._id},referenceData:{receiver:{userId:this.selectedPayee.userId,accountId:this.selectedPayee.accountId}}},a=await F.Z.post(`/api/transaction/${this.currentUser._id}`,n);console.log("trx added successfully:",a.data),alert("Transaction added successfully id : "+a.data._id),await this.refreshPage()}}};const ve=(0,D.Z)(we,[["render",Q],["__scopeId","data-v-66e413cc"]]);var ke=ve;const be=e=>((0,s.dD)("data-v-4e091a41"),e=e(),(0,s.Cn)(),e),Ue={class:"registration"},De=be((()=>(0,s._)("h2",null,"User Login",-1)));function Pe(e,t,n,r,o,i){return(0,s.wg)(),(0,s.iD)("div",Ue,[De,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),placeholder:"User Name"},null,512),[[a.nr,o.username]]),o.isRegister?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>o.email=e),placeholder:"Email"},null,512)),[[a.nr,o.email]]):(0,s.kq)("",!0),o.isRegister?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>o.password=e),placeholder:"Password",value:"email@example.com"},null,512)),[[a.nr,o.password]]):(0,s.kq)("",!0),o.isRegister?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:2,type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>o.password=e),placeholder:"Confirm Password"},null,512)),[[a.nr,o.password]]):(0,s.kq)("",!0),o.isRegister?((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:t[4]||(t[4]=(...e)=>i.registerUser&&i.registerUser(...e))},"Submit Registeration")):(0,s.kq)("",!0),o.isRegister?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:4,onClick:t[5]||(t[5]=(...e)=>i.loginUser&&i.loginUser(...e))},"Login")),o.isRegister?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:5,onClick:t[6]||(t[6]=e=>o.isRegister=!o.isRegister)},"Register"))])}var Ae={emits:["setUser"],data(){return{username:"",email:"",password:"",isRegister:!1}},methods:{async loginUser(){try{if(!this.validateRegistration(this.username))return void alert("Please enter a valid username name");const e=await F.Z.get(`/api/user/username/${this.username}`);console.log("Login successful:",e.data),console.log("Registration successful:",e.data),console.log("Navigating with userId:",e.data._id),this.$router.push({name:"home",params:{userId:e.data._id}}),this.$emit("setUser",e.data)}catch(e){alert("User not found, please register"),console.error("Registration failed:",e)}},validateRegistration(e){return e},async registerUser(){try{if(!this.validateRegistration(this.username))return void alert("Please enter a valid username name");const e=await F.Z.post("/api/user/register",{username:this.username,email:this.email,password:this.password});this.$emit("setUser",e.data),this.$router.push({name:"home",params:{userId:e.data._id}}),console.log("Registration successful:",e.data)}catch(e){console.error("Registration failed:",e)}}}};const Ie=(0,D.Z)(Ae,[["render",Pe],["__scopeId","data-v-4e091a41"]]);var Te=Ie;const Ce=e=>((0,s.dD)("data-v-176cf291"),e=e(),(0,s.Cn)(),e),Ne={class:"account-container"},ze={class:"account-details"},$e={class:"account-details-item"},Se=Ce((()=>(0,s._)("hr",null,null,-1))),Re=["onClick"];function xe(e,t,n,a,r,o){const c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Ne,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.accounts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"account-header",key:e._id},[(0,s._)("h2",null,"Account Details - "+(0,i.zw)(e.accountType),1),(0,s._)("div",ze,[(0,s._)("div",$e,[(0,s._)("p",null,"Account Number: "+(0,i.zw)(o.maskAccountNumber(e.accountNumber)),1),(0,s._)("p",null,"Account Type: "+(0,i.zw)(e.accountType),1),(0,s._)("p",null,"Balance: "+(0,i.zw)(e.balance),1),(0,s._)("p",null,"Account Holder: "+(0,i.zw)(e.user.username),1),(0,s._)("p",null,"IBAN: "+(0,i.zw)(e.encryptedDetails.IBAN),1),(0,s._)("p",null,"Withdrawal Limit: "+(0,i.zw)(e.limitations.withdrawalLimit),1),(0,s._)("p",null,"Transfer Limit: "+(0,i.zw)(e.limitations.transferLimit),1),(0,s._)("p",null,"Other Limitations: "+(0,i.zw)(e.limitations.otherLimitations),1),(0,s.Wm)(c,{to:{name:"transaction",params:{id:e._id,userId:e.userId}}},{default:(0,s.w5)((()=>[(0,s.Uk)("All Transactions")])),_:2},1032,["to"]),Se,(0,s._)("button",{onClick:t=>o.mockExternalPayPalPayment(e._id)},"Mock PayPal Payment",8,Re)])])])))),128)),(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>o.backToHome&&o.backToHome(...e))},"Back")])}var qe={name:"MainAccount",emits:["setUser"],props:["id"],data(){return{accounts:{}}},mounted(){this.fetchAccounts()},methods:{backToHome(){this.$router.go(-1)},mockExternalPayPalPayment(e){const t=+prompt("Enter the amount to recieve from PayPal"),n=F.Z.put(`/api/transaction/external/${this.id}`,{accountId:e,amount:t,type:"external",paymentMethod:"PayPal",status:"Completed",payerInfo:{payerId:"AX12345BXC123456",email:"payer@example.com",firstName:"John",lastName:"Doe",shippingAddress:{line1:"123 Main St",city:"Anytown",state:"CA",postalCode:"12345",countryCode:"US"}},recipientInfo:{merchantId:this.id}});console.log("PayPal payment response:",n)},maskAccountNumber(e){let t=e.toString();return t.length>3?"X".repeat(t.length-3)+t.substring(t.length-3):t},async fetchAccounts(){try{const e=await F.Z.get(`/api/account?userId=${this.id}`);this.accounts=e.data}catch(e){console.log(e)}}}};const Me=(0,D.Z)(qe,[["render",xe],["__scopeId","data-v-176cf291"]]);var He=Me;const Ze=e=>((0,s.dD)("data-v-11397a14"),e=e(),(0,s.Cn)(),e),Oe={class:"user-details"},Le=Ze((()=>(0,s._)("h2",null,"User Details",-1))),Be={class:"user-details__header"},je={class:"manage-button"};function Ye(e,t,n,a,r,o){return(0,s.wg)(),(0,s.iD)("div",Oe,[Le,(0,s._)("div",Be,[(0,s._)("div",null," Username: "+(0,i.zw)(r.user.username),1),(0,s._)("div",null,"Email : "+(0,i.zw)(r.user.email),1)]),(0,s._)("div",je,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>o.logoutUser&&o.logoutUser(...e))},"Logout"),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>o.deleteUser&&o.deleteUser(...e))},"Delete"),(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>o.back&&o.back(...e))},"Back")])])}var Ve={name:"MainUser",mounted(){console.log("mounted user",this.user)},data(){return{user:{_id:this.$route.query.userId,username:this.$route.query.username,email:this.$route.query.email}}},methods:{logoutUser(){this.$emit("setUser",null),this.emit("logout"),this.$router.push({name:"login"})},async deleteUser(){const e=confirm(`Are you sure you want to delete ${this.user.username}?`);if(!e)return;const t=await F.Z.delete(`/api/user/${this.user._id}`);console.log("User deleted successfully:",t.data),this.$emit("setUser",null),this.$router.push({name:"login"})},back(){this.$router.push({name:"home",params:{userId:this.user._id}})}}};const Ee=(0,D.Z)(Ve,[["render",Ye],["__scopeId","data-v-11397a14"]]);var Ke=Ee;const We=e=>((0,s.dD)("data-v-c0f28da6"),e=e(),(0,s.Cn)(),e),Qe={class:"main-transaction-search"},Fe={class:"search-transaction"},Xe=We((()=>(0,s._)("h3",null,"Search Transactions",-1))),Ge={class:"search-transaction-text"},Je={class:"transaction-records"},et=We((()=>(0,s._)("h3",null,"Transaction Records",-1))),tt={class:"transaction-list"},nt={key:0},at={class:"transaction-details"},st=We((()=>(0,s._)("b",null,"Amount",-1))),rt=We((()=>(0,s._)("b",null,"@",-1))),ot=We((()=>(0,s._)("summary",null,"Transaction steps",-1))),it=["onClick"],ct=We((()=>(0,s._)("hr",null,null,-1))),ut=We((()=>(0,s._)("hr",null,null,-1)));function lt(e,t,n,r,o,c){return(0,s.wg)(),(0,s.iD)("div",Qe,[(0,s._)("div",Fe,[Xe,(0,s._)("div",Ge,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),type:"text",placeholder:"Search for transactions...",class:"search-input"},null,512),[[a.nr,o.searchQuery]]),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>c.fetchTransactions&&c.fetchTransactions(...e)),class:"search-button"},"Search")])]),(0,s._)("div",Je,[et,(0,s._)("div",tt,[0===this.currentUser.transactions.length?((0,s.wg)(),(0,s.iD)("div",nt,"No transactions")):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.currentUser.transactions,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e._id},[(0,s._)("details",at,[(0,s._)("summary",null,[(0,s.Uk)("trxId : "+(0,i.zw)(e._id)+" | "+(0,i.zw)("outgoing"===e.type?"ðŸ“¤":"ðŸ“¥")+" |",1),st,(0,s.Uk)(" : "+(0,i.zw)(e.amount)+"$ | ",1),rt,(0,s.Uk)(" "+(0,i.zw)(new Date(e.date)),1)]),(0,s._)("p",null,"Type : "+(0,i.zw)(e.type),1),(0,s._)("p",null," From: "+(0,i.zw)("external"===e.type?"External":e.referenceData.sender.name),1),(0,s._)("p",null," To: "+(0,i.zw)(e.referenceData.receiver.name),1),(0,s._)("p",null," Details : "+(0,i.zw)(e.details),1),(0,s._)("p",null,"Amount: "+(0,i.zw)(e.amount),1),(0,s._)("p",null,"Status: "+(0,i.zw)(e.status),1),(0,s._)("details",null,[ot,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.steps,(e=>((0,s.wg)(),(0,s.iD)("p",{key:e.api}," * "+(0,i.zw)(e.api)+" - Completed: "+(0,i.zw)(e.completed),1)))),128))])]),"completed"===e.status&&"outgoing"===e.type?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t=>c.refund(e._id)},"Refund",8,it)):(0,s.kq)("",!0),ct,ut])))),128))])]),(0,s._)("button",{onClick:t[2]||(t[2]=(...e)=>c.backToHome&&c.backToHome(...e))},"Back")])}var dt={name:"TransactionSearch",props:["id","userId"],emits:["setUser"],mounted(){this.$route.query.trxId?this.fetchTransactions():this.refreshPage()},data(){return{currentUser:{_id:this.id,userId:this.userId,transactions:[]},searchQuery:this.$route.query.trxId?this.$route.query.trxId:""}},methods:{async refreshPage(){try{const e=await F.Z.get(`/api/transaction?accountId=${this.currentUser._id}`);console.log("User:",e.data),this.currentUser.transactions=e.data}catch(e){console.error("User not found:",e)}},refund(e){const t=window.confirm(`Are you sure you want to refund ${e}?`);if(!t)return;const n=F.Z.put(`/api/transaction/refund/${e}`);console.log("Refund successful:",n.data)},backToHome(){this.$router.push({name:"home",params:{userId:this.currentUser.userId}})},async fetchTransactions(){try{const e=await F.Z.get(`/api/transaction/${this.searchQuery}`);console.log("Transactions:",e.data),this.currentUser.transactions=[e.data]}catch(e){console.error("Transactions not found:",e)}}}};const mt=(0,D.Z)(dt,[["render",lt],["__scopeId","data-v-c0f28da6"]]);var ht=mt;const pt=[{path:"/app/login",name:"login",component:Te},{path:"/app/home/:userId",name:"home",component:ke,params:{userId:null},props:!0},{path:"/app/account/:id",component:He,name:"account",params:{id:null},props:!0},{path:"/app/user",name:"user",component:Ke,query:{username:null,email:null}},{path:"/app/transaction/:id/:userId",component:ht,name:"transaction",params:{id:null,userId:null},query:{trxId:null},props:!0}],yt=(0,N.p7)({history:(0,N.PO)(),routes:pt});var ft=yt;const gt=(0,a.ri)(C);gt.use(ft).mount("#app")}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,r){if(!a){var o=1/0;for(l=0;l<e.length;l++){a=e[l][0],s=e[l][1],r=e[l][2];for(var i=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,r<o&&(o=r));if(i){e.splice(l--,1);var u=s();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,s,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/app/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,o=a[0],i=a[1],c=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(c)var l=c(n)}for(t&&t(a);u<o.length;u++)r=o[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},a=self["webpackChunkpayments_frontend"]=self["webpackChunkpayments_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4740)}));a=n.O(a)})();
//# sourceMappingURL=app.14664656.js.map